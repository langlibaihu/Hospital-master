/*! 2016 Baidu Inc. All Rights Reserved */
define("common/js/pagination",["require"],function(require){function e(e){this.total=e.total||0,this.pageSize=e.pageSize||10,this.curPage=e.curPage||1,this.anchor=e.anchor||"#fastTop",this.totalEle=e.totalEle||null,this.pagerContainer=e.pagerContainer,this.curKeyWord=e.curKeyWord||"",this.callback=e.callback}return e.prototype={init:function(){this.showTotal(),this.render(),this.trrigerEvent()},showTotal:function(){if(this.total&&this.totalEle)this.totalEle.text(this.total)},pageTotal:function(){if(this.total)var e=this.total%this.pageSize==0?Math.floor(this.total/this.pageSize):Math.floor(this.total/this.pageSize)+1;return e},tokenTotal:function(){var e=this.curPage%5==0?this.curPage/5:Math.floor(this.curPage/5)+1;return e},pageIndex:function(){var e=this.curPage<=5?1:5*(this.tokenTotal()-1)+1;return e},view:function(){function e(e){if(r[e])r[e][o]=!0}for(var t='<ul class="pagination-x-list">',n=this.pageTotal(),i=this.curPage>>0,r={},o="isShow",a="pointer-hand",s=0;n>s;++s)r[s]={},r[s][o]=!1;if(e(0),e(1),e(i-3),e(i-2),e(i-1),e(i),e(i+1),e(n-1),2>i)e(i+3);if(3>i)e(i+2);if(t+="<ul>",1===i)t+='<li><a class="prev-off"><label>上一页</a></li></label></li>';else t+='<li> <a href="'+this.anchor+'" class="prev-on '+a+'" component="pageNum" pageNum="'+(i-1)+'" data-curkeyword="'+this.curKeyWord+'"><label>上一页</a></label></li>';for(var s=0;n>s;++s)if(r[s][o])if(i==s+1)t+='<li><a pageNum="'+(s+1)+'" class="'+(i==s+1?"currentpage":a)+'" data-curkeyword="'+this.curKeyWord+'">'+(s+1)+"</a></li>";else t+='<li><a href="'+this.anchor+'" component="pageNum" pageNum="'+(s+1)+'" class="'+(i==s+1?"currentpage":a)+'" data-curkeyword="'+this.curKeyWord+'">'+(s+1)+"</a></li>";else if(s>0&&r[s-1][o])t+='<li><a href="javascript:void(0)" class="ellipsis">...</a></li>';if(t+="<li>",i===n)t+='<a class="next-off"><label>下一页</label></a>';else t+='<a href="'+this.anchor+'" class="next-on '+a+'" component="pageNum" pageNum="'+(i+1)+'" data-curkeyword="'+this.curKeyWord+'"><label>下一页</label></a>';return t+="</li>",t+="</ul>"},render:function(){if(this.total)if(1!=this.pageTotal())this.pagerContainer.html(this.view());else this.pagerContainer.html("");else this.pagerContainer.html("")},trrigerEvent:function(){var e=this,t=e.pagerContainer;t.find("a[component='pageNum']").off().on("click",function(){var t=$(this).attr("pageNum");$(this).data("curkeyword");if(e.curPage)e.callback(t)})}},e});